<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Inicia sesión para comprar paquetes, reservar hospedajes o adquirir productos en Turismo Ica.">
  <title>Iniciar Sesión - Turismo Ica</title>
  <link rel="stylesheet" href="../MIS_CSS/login.css">
  <script src="../MIS_JS/playas.js" defer></script>
</head>
<body>
  <header class="header-login" role="banner">
    <div class="menu">
      <span class="logo">Turismo Ica</span>
      <button class="hamburger" id="hamburger" aria-label="Menú" aria-expanded="false" aria-controls="navbar">
        <span class="line"></span>
        <span class="line"></span>
        <span class="line"></span>
      </button>
      <nav class="navbar" id="navbar" role="navigation">
        <ul>
          <li><a href="playas.html">Playas</a></li>
          <li><a href="desierto.html">Desierto</a></li>
          <li><a href="cultura.html">Cultura</a></li>
          <li><a href="index.html">Inicio</a></li>
          <li><a href="suscripcion.html" class="btn-suscribete">Contáctanos</a></li>
        </ul>
      </nav>
    </div>
    <div class="header-content">
      <h1>Iniciar Sesión</h1>
      <p>Accede a tu cuenta para disfrutar de todas las experiencias en Ica.</p>
    </div>
  </header>

  <main>
    <section class="login-section" aria-labelledby="login-heading">
      <h2 id="login-heading">Inicia tu aventura</h2>
      <form id="login-form" class="login-form">
        <div class="form-group">
          <label for="email">Correo electrónico:</label>
          <input type="email" id="email" name="email" required placeholder="ejemplo@correo.com">
        </div>
        <div class="form-group">
          <label for="password">Contraseña:</label>
          <input type="password" id="password" name="password" required placeholder="Ingresa tu contraseña">
        </div>
        <button type="submit" class="btn-agregar">Iniciar Sesión</button>
        <div class="register-link">
          <p>¿No tienes cuenta? <a href="suscripcion.html" id="register-link">Regístrate aquí</a></p>
        </div>
      </form>
    </section>
  </main>

  <footer class="footer" role="contentinfo">
    <div class="footer-container">
      <div class="footer-contacto">
        <h2>Contáctanos</h2>
        <address>
          <p><i class="fas fa-envelope"></i> <strong>Correo:</strong> <a href="mailto:turismoica@gmail.com">turismoica@gmail.com</a></p>
          <p><i class="fas fa-phone"></i> <strong>Teléfono:</strong> <a href="tel:+51987654321">+51 987 654 321</a></p>
          <p><i class="fas fa-map-marker-alt"></i> <strong>Dirección:</strong> Av. San Martín 123, Ica, Perú</p>
        </address>
      </div>
      <div class="footer-redes">
        <h2>Síguenos</h2>
        <ul class="redes-list">
          <li><a href="https://facebook.com" target="_blank" rel="noopener noreferrer" aria-label="Facebook"><i class="fab fa-facebook"></i></a></li>
          <li><a href="https://instagram.com" target="_blank" rel="noopener noreferrer" aria-label="Instagram"><i class="fab fa-instagram"></i></a></li>
          <li><a href="https://tiktok.com" target="_blank" rel="noopener noreferrer" aria-label="TikTok"><i class="fab fa-tiktok"></i></a></li>
          <li><a href="https://youtube.com" target="_blank" rel="noopener noreferrer" aria-label="YouTube"><i class="fab fa-youtube"></i></a></li>
        </ul>
      </div>
      <div class="footer-newsletter">
        <h2>Suscríbete a nuestro boletín</h2>
        <form class="newsletter-form">
          <input type="email" placeholder="Tu correo electrónico" required>
          <button type="submit">Suscribirse</button>
        </form>
      </div>
    </div>
    <div class="footer-legal">
      <p>© 2025 Turismo Local en Ica, Perú. Todos los derechos reservados.</p>
      <ul class="legal-links">
        <li><a href="../politica-privacidad.html">Política de Privacidad</a></li>
        <li><a href="../terminos-condiciones.html">Términos y Condiciones</a></li>
        <li><a href="../mapa-sitio.html">Mapa del Sitio</a></li>
      </ul>
    </div>
  </footer>

  <script>
    // Font Awesome
    const fontAwesome = document.createElement('link');
    fontAwesome.rel = 'stylesheet';
    fontAwesome.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css';
    document.head.appendChild(fontAwesome);

    // Login form handling
    const loginForm = document.getElementById('login-form');
    if (loginForm) {
      loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const email = document.getElementById('email').value.trim().toLowerCase();
        const password = document.getElementById('password').value;

        const users = JSON.parse(localStorage.getItem('users') || '[]');
        const user = users.find(u => u.email.toLowerCase() === email && u.password === password);

        if (user) {
          const role = email === 'admi@gmail.com' && password.length >= 1 && password.length <= 8 ? 'admin' : 'user';
          localStorage.setItem('user', JSON.stringify({ username: email, name: user.name, role: role }));
          alert('¡Inicio de sesión exitoso!');
          const redirectUrl = localStorage.getItem('redirectAfterLogin') || 'index.html'; // Redirige a una página protegida
          localStorage.removeItem('redirectAfterLogin');
          window.location.href = redirectUrl;
        } else {
          alert('Correo o contraseña incorrectos.');
        }
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      const hamburger = document.getElementById('hamburger');
      const navbar = document.getElementById('navbar');

      if (hamburger && navbar) {
        hamburger.addEventListener('click', () => {
          const expanded = hamburger.getAttribute('aria-expanded') === 'true';
          hamburger.setAttribute('aria-expanded', !expanded);
          hamburger.classList.toggle('active');
          navbar.classList.toggle('open');
        });

        navbar.querySelectorAll('a').forEach(link => {
          link.addEventListener('click', () => {
            if (window.innerWidth <= 740) {
              hamburger.setAttribute('aria-expanded', 'false');
              hamburger.classList.remove('active');
              navbar.classList.remove('open');
            }
          });
        });
      }
    });
    
  </script>
</body>
</html>