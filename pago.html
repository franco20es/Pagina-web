<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Finaliza tu compra para paquetes turísticos en Ica, Perú. Paga con tarjeta o Yape.">
  <title>Pago - Turismo Ica</title>
  <link rel="stylesheet" href="pago.css">
  <script src="../MIS_JS/playas.js" defer></script>
</head>
<body>
  <main>
    <div class="pago-container">
      <!-- Resumen del carrito -->
      <section class="resumen-section" aria-labelledby="resumen-heading">
        <h2 id="resumen-heading">Resumen de tu compra</h2>
        <div id="resumen-carrito" class="resumen-carrito">
          <!-- Los items del carrito se cargarán aquí -->
        </div>
        <div class="resumen-total">
          <strong>Total a pagar: <span id="total-pagar">S/0</span></strong>
        </div>
      </section>

      <!-- Formulario de pago -->
      <section class="payment-section" aria-labelledby="payment-heading">
        <h2 id="payment-heading">Método de pago</h2>
        
        <!-- Selector de método de pago -->
        <div class="metodo-pago-selector">
          <label class="metodo-option">
            <input type="radio" name="metodo-pago" value="tarjeta" checked>
            <div class="metodo-content">
              <i class="fas fa-credit-card"></i>
              <span>Tarjeta de crédito/débito</span>
            </div>
          </label>
          <label class="metodo-option">
            <input type="radio" name="metodo-pago" value="yape">
            <div class="metodo-content">
              <i class="fas fa-mobile-alt"></i>
              <span>Yape</span>
            </div>
          </label>
        </div>

        <!-- Formulario de tarjeta -->
        <form id="tarjeta-form" class="payment-form metodo-form activo">
          <div class="form-group">
            <label for="full-name">Nombre completo:</label>
            <input type="text" id="full-name" name="full-name" required placeholder="Ej: Juan Pérez">
          </div>
          <div class="form-group">
            <label for="card-number">Número de tarjeta:</label>
            <input type="text" id="card-number" name="card-number" maxlength="16" pattern="\d{16}" required placeholder="1234567890123456">
            <div class="card-icons">
              <i class="fab fa-cc-visa"></i>
              <i class="fab fa-cc-mastercard"></i>
              <i class="fab fa-cc-amex"></i>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label for="expiry-date">Fecha de vencimiento:</label>
              <input type="month" id="expiry-date" name="expiry-date" required>
            </div>
            <div class="form-group">
              <label for="cvv">CVV:</label>
              <input type="text" id="cvv" name="cvv" maxlength="4" pattern="\d{3,4}" required placeholder="123">
            </div>
          </div>
          <button type="submit" class="btn-pagar">
            <i class="fas fa-lock"></i>
            Pagar con tarjeta
          </button>
        </form>

        <!-- Formulario de Yape -->
        <form id="yape-form" class="payment-form metodo-form">
          <div class="yape-info">
            <div class="yape-qr">
              <img src="../imagenes/yape-qr-user.png" alt="Código QR de Yape" style="width:200px;height:200px;object-fit:contain;">
            </div>
            <div class="yape-details">
              <h3>Paga con Yape</h3>
              <p>Escanea el código QR o envía el monto a:</p>
              <div class="yape-number">
                <strong>+51 987 654 321</strong>
                <button type="button" class="btn-copiar" onclick="copiarNumero()">
                  <i class="fas fa-copy"></i>
                </button>
              </div>
              <p class="yape-amount">Monto: <strong id="yape-amount">S/0</strong></p>
            </div>
          </div>
          <div class="form-group">
            <label for="yape-phone">Tu número de celular:</label>
            <input type="tel" id="yape-phone" name="yape-phone" pattern="[0-9]{9}" required placeholder="987654321">
          </div>
          <div class="form-group">
            <label for="yape-confirmation">Código de confirmación:</label>
            <input type="text" id="yape-confirmation" name="yape-confirmation" required placeholder="Ingresa el código de 6 dígitos">
          </div>
          <button type="submit" class="btn-pagar yape-btn">
            <i class="fas fa-check"></i>
            Confirmar pago con Yape
          </button>
        </form>
      </section>
    </div>
  </main>
  <script>
    // Font Awesome
    const fontAwesome = document.createElement('link');
    fontAwesome.rel = 'stylesheet';
    fontAwesome.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css';
    document.head.appendChild(fontAwesome);
  </script>
</body>
</html>

  <script>
    // Font Awesome
    const fontAwesome = document.createElement('link');
    fontAwesome.rel = 'stylesheet';
    fontAwesome.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css';
    document.head.appendChild(fontAwesome);

    // Authentication check
    document.addEventListener('DOMContentLoaded', () => {
      if (!localStorage.getItem('user')) {
        alert('Por favor, inicia sesión para realizar el pago.');
        window.location.href = 'login.html';
      }

      // Display destination
      const params = new URLSearchParams(window.location.search);
      const destino = params.get('destino') || 'Desconocido';
      document.getElementById('destination').textContent = destino.charAt(0).toUpperCase() + destino.slice(1);

      // Payment form validation and mock submission
      const paymentForm = document.getElementById('payment-form');
      if (paymentForm) {
        paymentForm.addEventListener('submit', (e) => {
          e.preventDefault();
          const cardNumber = document.getElementById('card-number').value;
          const cvv = document.getElementById('cvv').value;

          if (!/^\d{16}$/.test(cardNumber)) {
            alert('El número de tarjeta debe tener 16 dígitos.');
            return;
          }
          if (!/^\d{3,4}$/.test(cvv)) {
            alert('El CVV debe tener 3 o 4 dígitos.');
            return;
          }

          // Mock payment processing
          alert(`Pago exitoso para el destino: ${destino}. ¡Gracias por tu compra!`);
          window.location.href = 'index.html';
        });
      }
    });
  </script>
</body>
</html>